FROM registry.suse.com/bci/golang:1.21

ENV DAPPER_ENV REPO TAG DRONE_TAG DRONE_BRANCH CROSS RKE2_IMAGE_REPO USE_LOCAL_IMAGES BUILD_QCOW DRONE_BUILD_EVENT REMOTE_DEBUG
ENV DAPPER_SOURCE /go/src/github.com/harvester/addons/
ENV DAPPER_OUTPUT ./data
ENV DAPPER_DOCKER_SOCKET true

WORKDIR ${DAPPER_SOURCE}

ENTRYPOINT ["./scripts/entry"]